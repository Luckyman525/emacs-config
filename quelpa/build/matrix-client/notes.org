#+PROPERTY: logging nil

* Tasks

** TODO Mark events as read when last-seen line is moved

** TODO format error

#+BEGIN_QUOTE
Debugger entered--Lisp error: (error "Not enough arguments for format string")
  format-message("Unknown error occurred sending request to matrix homeserver: %S")
  apply(format-message "Unknown error occurred sending request to matrix homeserver: %S" nil)
  warn("Unknown error occurred sending request to matrix homeserver: %S")
  (let ((exit-code (matrix-parse-curl-exit-code (cdr error-thrown)))) (warn (cond ((memq exit-code (quote (60 51))) (let nil "Error sending request to matrix homeserver, SSL certificate is invalid")) ((null exit-code) (let nil "Unknown error occurred sending request to matrix homeserver: %S")) (t (let nil (format "Matrix request exited with exit code %d" exit-code))))))
  (progn (let ((--dolist-tail-- matrix-error-hook) handler) (while --dolist-tail-- (setq handler (car --dolist-tail--)) (funcall handler con symbol-status error-thrown) (setq --dolist-tail-- (cdr --dolist-tail--)))) (let ((exit-code (matrix-parse-curl-exit-code (cdr error-thrown)))) (warn (cond ((memq exit-code (quote (60 51))) (let nil "Error sending request to matrix homeserver, SSL certificate is invalid")) ((null exit-code) (let nil "Unknown error occurred sending request to matrix homeserver: %S")) (t (let nil (format "Matrix request exited with exit code %d" exit-code)))))))
  (let* ((error-thrown (car (cdr (plist-member args (quote :error-thrown))))) (symbol-status (car (cdr (plist-member args (quote :symbol-status)))))) (progn (let ((--dolist-tail-- matrix-error-hook) handler) (while --dolist-tail-- (setq handler (car --dolist-tail--)) (funcall handler con symbol-status error-thrown) (setq --dolist-tail-- (cdr --dolist-tail--)))) (let ((exit-code (matrix-parse-curl-exit-code (cdr error-thrown)))) (warn (cond ((memq exit-code (quote ...)) (let nil "Error sending request to matrix homeserver, SSL certificate is invalid")) ((null exit-code) (let nil "Unknown error occurred sending request to matrix homeserver: %S")) (t (let nil (format "Matrix request exited with exit code %d" exit-code))))))))
  matrix-request-error-handler([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #0 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil (("@carmike:matrix.org" (avatar_url) (displayname . "Michael") (membership . "join")) ("@alphapapa:matrix.org" (avatar_url) (displayname . "alphapapa") (membership . "join"))) nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #0 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil (("@alphapapa:matrix.org" (avatar_url) (displayname . "alphapapa") (membership . "join")) ("@baneross:matrix.org" (avatar_url . "mxc://matrix.org/WWPKfhaIJxXLYXUqJtDmrsVm") (displayname . "Bane Ross") (membership . "join"))) nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog (#0) apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446] :data nil :symbol-status error :error-thrown (error http 502) :response [cl-struct-request-response 502 nil nil (error http 502) error "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" nil (:type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil ... nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil ... nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t ... "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" ... ... "alphapapa" ... [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil ... nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil ... nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response #0) #<killed buffer> "HTTP/1.0 502 Bad Gateway\nCache-Control: no-cache\nConnection: close\nContent-Type: text/html\n" nil curl ("/tmp/emacs-request32113foL")])
  apply(matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #1 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil (("@carmike:matrix.org" (avatar_url) (displayname . "Michael") (membership . "join")) ("@alphapapa:matrix.org" (avatar_url) (displayname . "alphapapa") (membership . "join"))) nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #1 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil (("@alphapapa:matrix.org" (avatar_url) (displayname . "alphapapa") (membership . "join")) ("@baneross:matrix.org" (avatar_url . "mxc://matrix.org/WWPKfhaIJxXLYXUqJtDmrsVm") (displayname . "Bane Ross") (membership . "join"))) nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog (#1) apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446] :data nil :symbol-status error :error-thrown (error http 502) :response [cl-struct-request-response 502 nil nil (error http 502) error "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" nil (:type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ... apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response #1) #<killed buffer> "HTTP/1.0 502 Bad Gateway\nCache-Control: no-cache\nConnection: close\nContent-Type: text/html\n" nil curl ("/tmp/emacs-request32113foL")]))
  #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil (... ...) nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil (... ...) nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog (#3) apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"](:data nil :symbol-status error :error-thrown (error http 502) :response [cl-struct-request-response 502 nil nil (error http 502) error "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" nil (:type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil ... nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil ... nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t ... "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" ... ... "alphapapa" ... [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil ... nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil ... nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response #0) #<killed buffer> "HTTP/1.0 502 Bad Gateway\nCache-Control: no-cache\nConnection: close\nContent-Type: text/html\n" nil curl ("/tmp/emacs-request32113foL")])
  apply(#[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil (... ...) nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil (... ...) nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog (#3) apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] (:data nil :symbol-status error :error-thrown (error http 502) :response [cl-struct-request-response 502 nil nil (error http 502) error "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" nil (:type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ... apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response #1) #<killed buffer> "HTTP/1.0 502 Bad Gateway\nCache-Control: no-cache\nConnection: close\nContent-Type: text/html\n" nil curl ("/tmp/emacs-request32113foL")]))
  apply(apply #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil (... ...) nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil (... ...) nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog (#3) apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] (:data nil :symbol-status error :error-thrown (error http 502) :response [cl-struct-request-response 502 nil nil (error http 502) error "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" nil (:type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ... apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response #1) #<killed buffer> "HTTP/1.0 502 Bad Gateway\nCache-Control: no-cache\nConnection: close\nContent-Type: text/html\n" nil curl ("/tmp/emacs-request32113foL")]))
  request--safe-apply(#[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil (... ...) nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil (... ...) nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog (#3) apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] (:data nil :symbol-status error :error-thrown (error http 502) :response [cl-struct-request-response 502 nil nil (error http 502) error "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" nil (:type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ... apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response #1) #<killed buffer> "HTTP/1.0 502 Bad Gateway\nCache-Control: no-cache\nConnection: close\nContent-Type: text/html\n" nil curl ("/tmp/emacs-request32113foL")]))
  request--callback(#<killed buffer> :type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil (... ...) nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil (... ...) nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog (#3) apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (... ...) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (... ... ... ... ... ... ... ...) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil (... ...) nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #3 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil (... ...) nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog (#3) apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response [cl-struct-request-response 502 nil nil (error http 502) error "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" nil (:type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil ... nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil ... nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t ... "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" ... ... "alphapapa" ... [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil ... nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #5 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil ... nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response #0) #<killed buffer> "HTTP/1.0 502 Bad Gateway\nCache-Control: no-cache\nConnection: close\nContent-Type: text/html\n" nil curl ("/tmp/emacs-request32113foL")])
  apply(request--callback #<killed buffer> (:type "GET" :params (("access_token" . "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK") ("since" . "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436") ("timeout" . "30000") ("full_state" . "false")) :parser json-read :data "null" :error #[128 "\302\300\303\301\"\"\207" [matrix-request-error-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #4 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil ... nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #4 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil ... nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :headers (("Content-Type" . "application/json")) :complete #[128 "\302\300\303\301\"\"\207" [matrix-async-cb-router (#[128 "\302\300\303\301\"\"\207" [matrix-client-sync-handler ([eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t ... "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" ... ... "alphapapa" ... [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] [eieio-class-tag--matrix-client-connection "https://matrix.org" "MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK" 2 t (("!nnldzrRaEKzhEnLmjB:matrix.org" . [eieio-class-tag--matrix-client-room #4 #<buffer The best chat room, ever.> "The best chat room, ever." nil "Cars, computers, food." "!nnldzrRaEKzhEnLmjB:matrix.org" nil ... nil]) ("!MLtmepDRrBgyxCSiiq:matrix.org" . [eieio-class-tag--matrix-client-room #4 #<buffer Muffins vs Cupcakes II: The Reckoning> "Muffins vs Cupcakes II: The Reckoning" nil "" "!MLtmepDRrBgyxCSiiq:matrix.org" nil ... nil])) "s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436" (("m.room.message" . matrix-client-handler-m\.room\.message) ("m.lightrix.pattern" . matrix-client-handler-m\.lightrix\.pattern) ("m.room.topic" . matrix-client-handler-m\.room\.topic) ("m.room.name" . matrix-client-handler-m\.room\.name) ("m.room.member" . matrix-client-handler-m\.room\.member) ("m.room.aliases" . matrix-client-handler-m\.room\.aliases) ("m.presence" . matrix-client-handler-m\.presence) ("m.typing" . matrix-client-handler-m\.typing)) (matrix-client-debug-event-maybe matrix-client-render-event-to-room) "alphapapa" (matrix-client-input-filter-emote matrix-client-input-filter-join matrix-client-input-filter-leave matrix-client-send-to-current-room) [nil 23049 27749 288169 60 #[128 "\302\300\303\301\"\"\207" [matrix-client-start-watchdog ... apply append] 6 "\n\n(fn &rest ARGS2)"] nil nil 350000] 1510566953.2881446]) apply append] 6 "\n\n(fn &rest ARGS2)"] :url "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" :response [cl-struct-request-response 502 nil nil (error http 502) error "https://matrix.org/_matrix/client/r0/sync?access_token=MDAxOGxvY2F0aW9uIG1hdHJpeC5vcmcKMDAxM2lkZW50aWZpZXIga2V5CjAwMTBjaWQgZ2VuID0gMQowMDI4Y2lkIHVzZXJfaWQgPSBAYWxwaGFwYXBhOm1hdHJpeC5vcmcKMDAxNmNpZCB0eXBlID0gYWNjZXNzCjAwMjFjaWQgbm9uY2UgPSBZWUhXYTdDU05WOjtjbFR-CjAwMmZzaWduYXR1cmUgztehcHdmTAfUnSocnyIZlgjaFHo5RyyCelYotyBHY-EK&since=s331858480_323898773_1164256_65303485_21467246_193158_2359311_2926812_436&timeout=30000&full_state=false" nil #0 #<killed buffer> "HTTP/1.0 502 Bad Gateway\nCache-Control: no-cache\nConnection: close\nContent-Type: text/html\n" nil curl ("/tmp/emacs-request32113foL")]))
  request--curl-callback(#<process request curl> "finished\n")

#+END_QUOTE

** TODO Avatar change events are displayed as joins

I wonder how Riot determines that it's a profile change event. e.g.

#+BEGIN_EXAMPLE
  ((timestamp . "2018-08-05 14:44:06")
   ((event . matrix-sync-timeline)
    (room-id . "!roomid:matrix.org")
    (prev-batch . "s624701158_513867773_1093874_157527466_69933145_443272_9035199_7733013_17510")
    (last-full-sync . "s624700933_513867590_1093793_157527355_69933114_443272_9035195_7733012_17510")
    (data
     (limited . :json-false)
     (prev_batch . "s624701801_513868265_1094055_157527685_69933253_443272_9035215_7733024_17510")
     (events .
             [((origin_server_ts . 1533498245648)
               (sender . "@userid:matrix.org")
               (event_id . "$eventid:matrix.org")
               (unsigned
                (prev_content
                 (membership . "join")
                 (avatar_url . "mxc://matrix.org/oldurl")
                 (displayname . "Displayname"))
                (prev_sender . "@userid:matrix.org")
                (replaces_state . "$oldevent:matrix.org")
                (age . 973))
               (state_key . "@userid:matrix.org")
               (content
                (membership . "join")
                (avatar_url . "mxc://matrix.org/newurl")
                (displayname . "Displayname"))
               (membership . "join")
               (type . "m.room.member"))]))))
#+END_EXAMPLE

** TODO Error from broken image-loading connection
:PROPERTIES:
:ID:       18501c3b-76a2-4354-befa-d8ffd8340d1b
:END:

[2018-07-15 Sun 15:11]  

#+BEGIN_EXAMPLE
Debugger entered--Lisp error: (error "Keyword argument :url not one of (:cbargs :status :error :headers :data)")
  signal(error ("Keyword argument :url not one of (:cbargs :status :error :headers :data)"))
  error("Keyword argument %s not one of (:cbargs :status :error :headers :data)" :url)
  #f(compiled-function (&rest --cl-rest--) #<bytecode 0x5c554a9>)(:url "https://i.imgur.com/BsT9Yhn.jpg" :cbargs nil :status nil :error nil)
  funcall(#f(compiled-function (&rest --cl-rest--) #<bytecode 0x5c554a9>) :url "https://i.imgur.com/BsT9Yhn.jpg" :cbargs nil :status nil :error nil)
  (if (not url-http-end-of-headers) (funcall error-body-fn :url url :cbargs cbargs :status status :error (plist-get status :error)) (let ((headers (buffer-substring (point) url-http-end-of-headers)) (data (if parser (progn (goto-char (1+ url-http-end-of-headers)) (funcall parser)) (buffer-substring (1+ url-http-end-of-headers) (point-max))))) (funcall success-body-fn :cbargs cbargs :status status :headers headers :data data)))
  (closure ((cbargs) (status) (error-body-fn . #f(compiled-function (&rest --cl-rest--) #<bytecode 0x5c554a9>)) (success-body-fn . #f(compiled-function (&rest args2) #<bytecode 0x538a361>)) (query-on-exit) (parser . #f(compiled-function (&rest args2) #<bytecode 0x538a341>)) (error) (success . #f(compiled-function (&rest args2) #<bytecode 0x538a361>)) (timeout) (query) (extra-headers) (method . "GET") (data) (inhibit-cookies . t) (silent . t) (cbargs) (--cl-rest-- :silent t :inhibit-cookies t :query-on-exit nil :parser #f(compiled-function (&rest args2) #<bytecode 0x538a341>) :success #f(compiled-function (&rest args2) #<bytecode 0x538a361>)) (url . "https://i.imgur.com/BsT9Yhn.jpg") t) nil (if (not url-http-end-of-headers) (funcall error-body-fn :url url :cbargs cbargs :status status :error (plist-get status :error)) (let ((headers (buffer-substring (point) url-http-end-of-headers)) (data (if parser (progn (goto-char (1+ url-http-end-of-headers)) (funcall parser)) (buffer-substring (1+ url-http-end-of-headers) (point-max))))) (funcall success-body-fn :cbargs cbargs :status status :headers headers :data data))))()
  funcall((closure ((cbargs) (status) (error-body-fn . #f(compiled-function (&rest --cl-rest--) #<bytecode 0x5c554a9>)) (success-body-fn . #f(compiled-function (&rest args2) #<bytecode 0x538a361>)) (query-on-exit) (parser . #f(compiled-function (&rest args2) #<bytecode 0x538a341>)) (error) (success . #f(compiled-function (&rest args2) #<bytecode 0x538a361>)) (timeout) (query) (extra-headers) (method . "GET") (data) (inhibit-cookies . t) (silent . t) (cbargs) (--cl-rest-- :silent t :inhibit-cookies t :query-on-exit nil :parser #f(compiled-function (&rest args2) #<bytecode 0x538a341>) :success #f(compiled-function (&rest args2) #<bytecode 0x538a361>)) (url . "https://i.imgur.com/BsT9Yhn.jpg") t) nil (if (not url-http-end-of-headers) (funcall error-body-fn :url url :cbargs cbargs :status status :error (plist-get status :error)) (let ((headers (buffer-substring (point) url-http-end-of-headers)) (data (if parser (progn (goto-char (1+ url-http-end-of-headers)) (funcall parser)) (buffer-substring (1+ url-http-end-of-headers) (point-max))))) (funcall success-body-fn :cbargs cbargs :status status :headers headers :data data)))))
  (cond ((consp status) (let* ((x480 (car status))) (cond ((eq x480 :error) (funcall error-body-fn :url url :cbargs cbargs :status status :error (plist-get status :error))) ((eq x480 :peer) (let* ((x482 (cdr status))) (if (consp x482) (let* ((x483 (car x482))) (if (consp x483) (let* ((x484 (car x483))) (if (eq x484 :certificate) (let* ((x486 (cdr x482))) (if (null x486) (funcall pcase-1) (error "Response status unrecognized; please report this error: %s" (pp-to-string status)))) (funcall pcase-0))) (funcall pcase-0))) (funcall pcase-0)))) ((eq x480 :redirect) (funcall pcase-1)) (t (funcall pcase-0))))) ((null status) (funcall pcase-1)) (t (funcall pcase-0)))
  (let* ((pcase-1 (function (lambda nil (if (not url-http-end-of-headers) (funcall error-body-fn :url url :cbargs cbargs :status status :error (plist-get status :error)) (let ((headers (buffer-substring (point) url-http-end-of-headers)) (data (if parser (progn (goto-char (1+ url-http-end-of-headers)) (funcall parser)) (buffer-substring (1+ url-http-end-of-headers) (point-max))))) (funcall success-body-fn :cbargs cbargs :status status :headers headers :data data)))))) (pcase-0 (function (lambda nil (error "Response status unrecognized; please report this error: %s" (pp-to-string status)))))) (cond ((consp status) (let* ((x480 (car status))) (cond ((eq x480 :error) (funcall error-body-fn :url url :cbargs cbargs :status status :error (plist-get status :error))) ((eq x480 :peer) (let* ((x482 (cdr status))) (if (consp x482) (let* ((x483 (car x482))) (if (consp x483) (let* ((x484 (car x483))) (if (eq x484 :certificate) (let* ((x486 (cdr x482))) (if (null x486) (funcall pcase-1) (error "Response status unrecognized; please report this error: %s" (pp-to-string status)))) (funcall pcase-0))) (funcall pcase-0))) (funcall pcase-0)))) ((eq x480 :redirect) (funcall pcase-1)) (t (funcall pcase-0))))) ((null status) (funcall pcase-1)) (t (funcall pcase-0))))
  (unwind-protect (let* ((pcase-1 (function (lambda nil (if (not url-http-end-of-headers) (funcall error-body-fn :url url :cbargs cbargs :status status :error (plist-get status :error)) (let ((headers (buffer-substring (point) url-http-end-of-headers)) (data (if parser (progn (goto-char (1+ url-http-end-of-headers)) (funcall parser)) (buffer-substring (1+ url-http-end-of-headers) (point-max))))) (funcall success-body-fn :cbargs cbargs :status status :headers headers :data data)))))) (pcase-0 (function (lambda nil (error "Response status unrecognized; please report this error: %s" (pp-to-string status)))))) (cond ((consp status) (let* ((x480 (car status))) (cond ((eq x480 :error) (funcall error-body-fn :url url :cbargs cbargs :status status :error (plist-get status :error))) ((eq x480 :peer) (let* ((x482 (cdr status))) (if (consp x482) (let* ((x483 (car x482))) (if (consp x483) (let* ((x484 (car x483))) (if (eq x484 :certificate) (let* ((x486 (cdr x482))) (if (null x486) (funcall pcase-1) (error "Response status unrecognized; please report this error: %s" (pp-to-string status)))) (funcall pcase-0))) (funcall pcase-0))) (funcall pcase-0)))) ((eq x480 :redirect) (funcall pcase-1)) (t (funcall pcase-0))))) ((null status) (funcall pcase-1)) (t (funcall pcase-0)))) (if matrix-url-with-retrieve-async-timeout-timer (progn (cancel-timer matrix-url-with-retrieve-async-timeout-timer))) (if (kill-buffer (current-buffer)) nil (warn "Unable to kill response buffer: %s" (current-buffer))))
  (closure ((error-body-fn . #f(compiled-function (&rest --cl-rest--) #<bytecode 0x5c554a9>)) (success-body-fn . #f(compiled-function (&rest args2) #<bytecode 0x538a361>)) (query-on-exit) (parser . #f(compiled-function (&rest args2) #<bytecode 0x538a341>)) (error) (success . #f(compiled-function (&rest args2) #<bytecode 0x538a361>)) (timeout) (query) (extra-headers) (method . "GET") (data) (inhibit-cookies . t) (silent . t) (cbargs) (--cl-rest-- :silent t :inhibit-cookies t :query-on-exit nil :parser #f(compiled-function (&rest args2) #<bytecode 0x538a341>) :success #f(compiled-function (&rest args2) #<bytecode 0x538a361>)) (url . "https://i.imgur.com/BsT9Yhn.jpg") t) (status &optional cbargs) (unwind-protect (let* ((pcase-1 (function (lambda nil (if (not url-http-end-of-headers) (funcall error-body-fn :url url :cbargs cbargs :status status :error (plist-get status :error)) (let ((headers (buffer-substring (point) url-http-end-of-headers)) (data (if parser (progn (goto-char (1+ url-http-end-of-headers)) (funcall parser)) (buffer-substring (1+ url-http-end-of-headers) (point-max))))) (funcall success-body-fn :cbargs cbargs :status status :headers headers :data data)))))) (pcase-0 (function (lambda nil (error "Response status unrecognized; please report this error: %s" (pp-to-string status)))))) (cond ((consp status) (let* ((x480 (car status))) (cond ((eq x480 :error) (funcall error-body-fn :url url :cbargs cbargs :status status :error (plist-get status :error))) ((eq x480 :peer) (let* ((x482 (cdr status))) (if (consp x482) (let* ((x483 (car x482))) (if (consp x483) (let* ((x484 (car x483))) (if (eq x484 :certificate) (let* ((x486 (cdr x482))) (if (null x486) (funcall pcase-1) (error "Response status unrecognized; please report this error: %s" (pp-to-string status)))) (funcall pcase-0))) (funcall pcase-0))) (funcall pcase-0)))) ((eq x480 :redirect) (funcall pcase-1)) (t (funcall pcase-0))))) ((null status) (funcall pcase-1)) (t (funcall pcase-0)))) (if matrix-url-with-retrieve-async-timeout-timer (progn (cancel-timer matrix-url-with-retrieve-async-timeout-timer))) (if (kill-buffer (current-buffer)) nil (warn "Unable to kill response buffer: %s" (current-buffer)))))(nil)
  apply((closure ((error-body-fn . #f(compiled-function (&rest --cl-rest--) #<bytecode 0x5c554a9>)) (success-body-fn . #f(compiled-function (&rest args2) #<bytecode 0x538a361>)) (query-on-exit) (parser . #f(compiled-function (&rest args2) #<bytecode 0x538a341>)) (error) (success . #f(compiled-function (&rest args2) #<bytecode 0x538a361>)) (timeout) (query) (extra-headers) (method . "GET") (data) (inhibit-cookies . t) (silent . t) (cbargs) (--cl-rest-- :silent t :inhibit-cookies t :query-on-exit nil :parser #f(compiled-function (&rest args2) #<bytecode 0x538a341>) :success #f(compiled-function (&rest args2) #<bytecode 0x538a361>)) (url . "https://i.imgur.com/BsT9Yhn.jpg") t) (status &optional cbargs) (unwind-protect (let* ((pcase-1 (function (lambda nil (if (not url-http-end-of-headers) (funcall error-body-fn :url url :cbargs cbargs :status status :error (plist-get status :error)) (let ((headers (buffer-substring (point) url-http-end-of-headers)) (data (if parser (progn (goto-char (1+ url-http-end-of-headers)) (funcall parser)) (buffer-substring (1+ url-http-end-of-headers) (point-max))))) (funcall success-body-fn :cbargs cbargs :status status :headers headers :data data)))))) (pcase-0 (function (lambda nil (error "Response status unrecognized; please report this error: %s" (pp-to-string status)))))) (cond ((consp status) (let* ((x480 (car status))) (cond ((eq x480 :error) (funcall error-body-fn :url url :cbargs cbargs :status status :error (plist-get status :error))) ((eq x480 :peer) (let* ((x482 (cdr status))) (if (consp x482) (let* ((x483 (car x482))) (if (consp x483) (let* ((x484 (car x483))) (if (eq x484 :certificate) (let* ((x486 (cdr x482))) (if (null x486) (funcall pcase-1) (error "Response status unrecognized; please report this error: %s" (pp-to-string status)))) (funcall pcase-0))) (funcall pcase-0))) (funcall pcase-0)))) ((eq x480 :redirect) (funcall pcase-1)) (t (funcall pcase-0))))) ((null status) (funcall pcase-1)) (t (funcall pcase-0)))) (if matrix-url-with-retrieve-async-timeout-timer (progn (cancel-timer matrix-url-with-retrieve-async-timeout-timer))) (if (kill-buffer (current-buffer)) nil (warn "Unable to kill response buffer: %s" (current-buffer))))) nil)
  url-http-activate-callback()
  url-http-end-of-document-sentinel(#<process i.imgur.com> "connection broken by remote peer\n")
  url-http-async-sentinel(#<process i.imgur.com> "connection broken by remote peer\n")
#+END_EXAMPLE

** TODO Make /sync update existing events

The cleanest way to do "pending/sending" messages would be to make fake room message events and give them to the standard handler.  The problem is that some fields, like =origin_server_ts=, can only come from the server (we could fake that field, but then it wouldn't be accurate).

So what we need is to update existing events in the message buffer.  (Or try using =ewoc=, but that would be a major rewrite of a lot of things, so maybe later...)

** MAYBE Use [[https://github.com/kiwanami/emacs-ctable][ctable]] for room list instead of =tabulated-list=

* Plans

